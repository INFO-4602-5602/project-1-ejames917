<html>
<head>
<title>Project 0</title>
<style type="text/css" href="project0.css"></style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<!--Put your D3 import statement between these two lines-->
<script src="https://d3js.org/d3.v4.js"></script>
<!--Put your D3 import statement between these two lines-->
</head>
	
<style>
.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 2px;
}
	
body {
  font: 14px sans-serif;
}
	
.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}
	
.dot {
  stroke: #000;
}
	
div.tooltip {
  position: absolute;
  text-align: center;
  width: 60px;
  height: 28px;
  padding: 2px;
  font: 12px sans-serif;
  background: lightsteelblue;
  border: 0px;
  border-radius: 8px;
  pointer-events: none;
}
</style>


<body>
	<div id="partOne">
        <h1>Part One: </h1>
        I've made a change!
	</div>
    
    <div id="partTwo">
        <h1>Part Two: </h1>
        <div id="barchart">
        </div>
	</div>
    
    <div id="partThree">
        <h1>Part Three &amp; Four: </h1>
        <div id="scatterplot">
            <p id="scatterLabel"></p>
        </div>
	</div>
    
    <div id="partFive">
        <h1>Part Five: </h1>
        <div id="scatterplotSet">
        </div>
	</div>
    
    <script type="text/javascript">
        // Put your part one code here ***********************
        d3.csv("/anscombe_I.csv", function(data) {
			checkDataset(data);
		});
        d3.csv("/anscombe_II.csv", function(data) {
            checkDataset(data);
        });
        d3.csv("/anscombe_III.csv", function(data) {
            checkDataset(data);
        });
        d3.csv("/anscombe_IV.csv", function(data) {
            checkDataset(data);
        });

        // Leave this to test your data uploading. All data uploading should be above this line
        function checkDataset(dataset) {
            if (dataset.length == 11)
                $("#partOne").append("<p>data loaded correctly</p>");
            else
                $("#partOne").append("<p>data loaded incorrectly. Try using the debugger to help you find the bug!</p>");
        }
		        
        // Put your part two code here ***********************
		//Set marginz
		var margin = {top: 20, right: 20, bottom: 30, left: 50},
    		width = 960 - margin.left - margin.right,
    		height = 500 - margin.top - margin.bottom,
			radius = 6;
		
		//Set ranges
		var x = d3.scaleLinear().range([0,width]);
		var y = d3.scaleLinear().range([height, 0]);

		
		// append the svg object to the body of the page
		// appends a 'group' element to 'svg'
		// moves the 'group' element to the top left margin
		var graph1 = d3.select("#partTwo")
		  .append("svg")
			.attr("width", width + margin.left + margin.right)
			.attr("height", height + margin.top + margin.bottom)
		  .append("g")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
		
		//Circle attributes
		var circleAttrs = {
          	cx: function(d) {return x(d.x);},
          	cy: function(d) {return y(d.y);},
          	r: radius
      	};
		
		//Div stuff for tooltips
		var div = d3.select("body").append("div")
			.attr("class", "tooltip")
			.style("opacity", 0);
		
		// Get the data
		d3.csv("anscombe_I.csv", function(error, data) {
		  if (error) throw error;

		  // format the data
		  data.forEach(function(d) {
			  d.x = +d.x;
			  d.y = +d.y;
		  });
			
		//Scale the range of the data
	   	x.domain(d3.extent(data, function(d) {return d.x;}));
	  	y.domain([0, d3.max(data, function(d) {return d.y;})]);

	  	// Add the scatterplot
	  	graph1.selectAll("dot")
		  .data(data)
		  .enter()
		  .append("circle")
		  //.attr(circleAttrs)
		  .attr("r", radius)
		  .attr("cx", function(d) {return x(d.x);})
		  .attr("cy", function(d) {return y(d.y);})
		  .on("mouseover", handleMouseOver)
		  .on("mouseout", handleMouseOut)
		  .on("click", handleClick);

	  	// Add the X Axis
	  	graph1.append("g")
		  .attr("transform", "translate(0," + height + ")")
		  .call(d3.axisBottom(x));

	  	// Add the Y Axis
	  	graph1.append("g")
		  .call(d3.axisLeft(y));

	});

		// Put your part three & four code here ***********************
		//~~~~~~~~~~~~Part 3~~~~~~~~~~~~~~~~~~
		var valueline = d3.line()
			.x(function(d) {return x(d.x);})
			.y(function(d) {return y(d.y);});
		
		var graph2 = d3.select("#partThree")
		  .append("svg")
			.attr("width", width + margin.left + margin.right)
			.attr("height", height + margin.top + margin.bottom)
		  .append("g")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
		
		//Get data. Can I do both of the graphs in the same d3.csv call??
		d3.csv("anscombe_I.csv", function(error, data) {
			if(error) throw error;
			
			data.forEach(function(d) {
				d.x = +d.x;
				d.y = +d.y;
			});
						 
			//Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.x; }));
			y.domain([0, d3.max(data, function(d) { return d.y; })]);

			//Add valueline
			graph2.append("path")
				.data([data])
				.attr("class", "line")
				.attr("d", valueline);
			
			// Add the X Axis
  			graph2.append("g")
      			.attr("transform", "translate(0," + height + ")")
      			.call(d3.axisBottom(x));

  			// Add the Y Axis
  			graph2.append("g")
      			.call(d3.axisLeft(y));
		});
		
		//~~~~~~~~~~~~~~Part 4~~~~~~~~~~~~~~~~
		function handleMouseOver(d, i) {
			//Select element and change color/size. For dots
			d3.select(this)
				.transition()
				.duration(150)
				.style("fill","green")
				.style("r", radius*2);
			//Now do the tooltip stuff
			div.transition()
				.duration(150)
				.style("opacity", .9);
			div.html("x: " + d.x + "<br/>" + "y: " + d.y)
				.style("left", (d3.event.pageX - 25) + "px")
				.style("top", (d3.event.pageY + 15) + "px");
		}
			
		function handleMouseOut(d, i) {
			//Use D3 to select element and change color back to normal
			d3.select(this)
				.transition()
				.duration(150)
				.style("fill","black")
				.style("r", radius);
			div.transition()
				.duration(150)
				.style("opacity", 0);
		}
		
		function handleClick(d, i) {
			console.log(d);
		}
        // Put your part five code here ***********************
        
    </script>
</body>


</html>
